(()=>{"use strict";var e={20:(e,t,s)=>{var a=s(609),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,l=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};t.Fragment=r,t.jsx=function(e,t,s){var a,r={},u=null,c=null;for(a in void 0!==s&&(u=""+s),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)n.call(t,a)&&!o.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:i,type:e,key:u,ref:c,props:r,_owner:l.current}}},848:(e,t,s)=>{e.exports=s(20)},493:(e,t,s)=>{var a=s(609),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=a.useState,n=a.useEffect,l=a.useLayoutEffect,o=a.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!i(e,s)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),a=r({inst:{value:s,getSnapshot:t}}),i=a[0].inst,c=a[1];return l((function(){i.value=s,i.getSnapshot=t,u(i)&&c({inst:i})}),[e,s,t]),n((function(){return u(i)&&c({inst:i}),e((function(){u(i)&&c({inst:i})}))}),[e]),o(s),s};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:c},162:(e,t,s)=>{var a=s(609),i=s(888),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=i.useSyncExternalStore,l=a.useRef,o=a.useEffect,u=a.useMemo,c=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,s,a,i){var h=l(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=u((function(){function e(e){if(!o){if(o=!0,n=e,e=a(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return l=t}return l=e}if(t=l,r(n,e))return t;var s=a(e);return void 0!==i&&i(t,s)?(n=e,t):(n=e,l=s)}var n,l,o=!1,u=void 0===s?null:s;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,s,a,i]);var f=n(e,h[0],h[1]);return o((function(){d.hasValue=!0,d.value=f}),[f]),c(f),f}},888:(e,t,s)=>{e.exports=s(493)},242:(e,t,s)=>{e.exports=s(162)},609:e=>{e.exports=window.React}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var a=s(609);const i=window.wp.element,r=window.wp.components,n=window.wp.i18n,l="bTcx1n2y8X8R4LPk3TCL";var o=s(848);function u(e,t){return"function"==typeof e?e(t):e}function c(e,t){return g(t).reduce(((e,t)=>null===e?null:void 0!==e?e[t]:void 0),e)}function h(e,t,s){const a=g(t);return function e(t){if(!a.length)return u(s,t);const i=a.shift();if("string"==typeof i||"number"==typeof i&&!Array.isArray(t))return"object"==typeof t?(null===t&&(t={}),{...t,[i]:e(t[i])}):{[i]:e()};if(Array.isArray(t)&&"number"==typeof i){const s=t.slice(0,i);return[...s.length?s:new Array(i),e(t[i]),...t.slice(i+1)]}return[...new Array(i),e()]}(e)}const d=/^(\d*)$/gm,f=/\.(\d*)\./gm,p=/^(\d*)\./gm,v=/\.(\d*$)/gm,m=/\.{2,}/gm,y="__int__",b=`${y}$1`;function g(e){if(Array.isArray(e))return[...e];if("string"!=typeof e)throw new Error("Path must be a string.");return e.replaceAll("[",".").replaceAll("]","").replace(d,b).replace(f,`.${b}.`).replace(p,`${b}.`).replace(v,`.${b}`).replace(m,".").split(".").map((e=>0===e.indexOf(y)?parseInt(e.substring(y.length),10):e))}function S(e,t){const{asyncDebounceMs:s}=t,{onChangeAsync:a,onBlurAsync:i,onSubmitAsync:r,onBlurAsyncDebounceMs:n,onChangeAsyncDebounceMs:l}=t.validators||{},o=s??0,u={cause:"change",validate:a,debounceMs:l??o},c={cause:"blur",validate:i,debounceMs:n??o},h={cause:"submit",validate:r,debounceMs:0},d=e=>({...e,debounceMs:0});switch(e){case"submit":return[d(u),d(c),h];case"blur":return[c];case"change":return[u];default:return[]}}function w(e,t){const{onChange:s,onBlur:a,onSubmit:i,onMount:r}=t.validators||{},n={cause:"change",validate:s},l={cause:"blur",validate:a},o={cause:"submit",validate:i},u={cause:"mount",validate:r},c={cause:"server",validate:()=>{}};switch(e){case"mount":return[u];case"submit":return[n,l,o,c];case"server":return[c];case"blur":return[l,c];default:return[n,c]}}class M{constructor(e,t){this.listeners=new Set,this.subscribe=e=>{var t,s;this.listeners.add(e);const a=null==(s=null==(t=this.options)?void 0:t.onSubscribe)?void 0:s.call(t,e,this);return()=>{this.listeners.delete(e),null==a||a()}},this.setState=e=>{var t,s,a;this.prevState=this.state,this.state=(null==(t=this.options)?void 0:t.updateFn)?this.options.updateFn(this.prevState)(e):e(this.prevState),null==(a=null==(s=this.options)?void 0:s.onUpdate)||a.call(s),I(this)},this.prevState=e,this.state=e,this.options=t}}class R{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const e=[],t=[];for(const s of this.options.deps)e.push(s.prevState),t.push(s.state);return this.lastSeenDepValues=t,{prevDepVals:e,currDepVals:t,prevVal:this.prevState??void 0}},this.recompute=()=>{var e,t;this.prevState=this.state;const{prevDepVals:s,currDepVals:a,prevVal:i}=this.getDepVals();this.state=this.options.fn({prevDepVals:s,currDepVals:a,prevVal:i}),null==(t=(e=this.options).onUpdate)||t.call(e)},this.checkIfRecalculationNeededDeeply=()=>{for(const e of this.options.deps)e instanceof R&&e.checkIfRecalculationNeededDeeply();let e=!1;const t=this.lastSeenDepValues,{currDepVals:s}=this.getDepVals();for(let a=0;a<s.length;a++)if(s[a]!==t[a]){e=!0;break}e&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const e of this._subscriptions)e()}),this.subscribe=e=>{var t,s;this.listeners.add(e);const a=null==(s=(t=this.options).onSubscribe)?void 0:s.call(t,e,this);return()=>{this.listeners.delete(e),null==a||a()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const t of e)if(t instanceof R)t.registerOnGraph(),this.registerOnGraph(t.options.deps);else if(t instanceof M){let e=O.get(t);e||(e=new Set,O.set(t,e)),e.add(this);let s=C.get(this);s||(s=new Set,C.set(this,s)),s.add(t)}}unregisterFromGraph(e=this.options.deps){for(const t of e)if(t instanceof R)this.unregisterFromGraph(t.options.deps);else if(t instanceof M){const e=O.get(t);e&&e.delete(this);const s=C.get(this);s&&s.delete(t)}}}const O=new WeakMap,C=new WeakMap,E={current:[]};let F=!1,A=0;const P=new Set,D=new Map;function x(e){const t=Array.from(e).sort(((e,t)=>e instanceof R&&e.options.deps.includes(t)?1:t instanceof R&&t.options.deps.includes(e)?-1:0));for(const e of t){if(E.current.includes(e))continue;E.current.push(e),e.recompute();const t=C.get(e);if(t)for(const e of t){const t=O.get(e);t&&x(t)}}}function T(e){e.listeners.forEach((t=>t({prevVal:e.prevState,currentVal:e.state})))}function _(e){e.listeners.forEach((t=>t({prevVal:e.prevState,currentVal:e.state})))}function I(e){if(A>0&&!D.has(e)&&D.set(e,e.prevState),P.add(e),!(A>0||F))try{for(F=!0;P.size>0;){const e=Array.from(P);P.clear();for(const t of e){const e=D.get(t)??t.prevState;t.prevState=e,T(t)}for(const t of e){const e=O.get(t);e&&(E.current.push(t),x(e))}for(const t of e){const e=O.get(t);if(e)for(const t of e)_(t)}}}finally{F=!1,E.current=[],D.clear()}}function V(e){A++;try{e()}finally{if(A--,0===A){const e=Array.from(P)[0];e&&I(e)}}}function k(e,t){const s=new Map;for(const t of e){const e=[...t.path??[]].map((e=>{const t="object"==typeof e?e.key:e;return"number"==typeof t?`[${t}]`:t})).join(".").replace(/\.\[/g,"[");s.set(e,(s.get(e)??[]).concat(t))}const a={};return s.forEach(((e,s)=>{a[s]=t(e)})),a}const q=(e={})=>()=>{const t=e.transformErrors??(e=>e.map((e=>e.message)).join(", ")),s=e=>{return"form"===e?(s=t,e=>({form:s(e),fields:k(e,s)})):t;var s};return{validate({value:e,validationSource:t},a){const i=a["~standard"].validate(e);if(i instanceof Promise)throw new Error("async function passed to sync validator");if(i.issues)return s(t)(i.issues)},async validateAsync({value:e,validationSource:t},a){const i=await a["~standard"].validate(e);if(i.issues)return s(t)(i.issues)}}},Q=e=>!!e&&"~standard"in e;function j(e){return{values:e.values??{},errorMap:e.errorMap??{},fieldMetaBase:e.fieldMetaBase??{},isSubmitted:e.isSubmitted??!1,isSubmitting:e.isSubmitting??!1,isValidating:e.isValidating??!1,submissionAttempts:e.submissionAttempts??0,validationMetaMap:e.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}}}class B{constructor(e){var t;this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{const e=this.fieldMetaDerived.mount(),t=this.store.mount(),s=()=>{e(),t()},{onMount:a}=this.options.validators||{};return a?(this.validateSync("mount"),s):s},this.update=e=>{if(!e)return;const t=this.options;this.options=e,V((()=>{const s=e.defaultValues&&e.defaultValues!==t.defaultValues&&!this.state.isTouched,a=e.defaultState!==t.defaultState&&!this.state.isTouched;this.baseStore.setState((()=>j(Object.assign({},this.state,a?e.defaultState:{},s?{values:e.defaultValues}:{}))))}))},this.reset=(e,t)=>{const{fieldMeta:s}=this.state,a=this.resetFieldMeta(s);e&&!(null==t?void 0:t.keepDefaultValues)&&(this.options={...this.options,defaultValues:e}),this.baseStore.setState((()=>{var t;return j({...this.options.defaultState,values:e??this.options.defaultValues??(null==(t=this.options.defaultState)?void 0:t.values),fieldMetaBase:a})}))},this.validateAllFields=async e=>{const t=[];return V((()=>{Object.values(this.fieldInfo).forEach((s=>{if(!s.instance)return;const a=s.instance;t.push(Promise.resolve().then((()=>a.validate(e)))),s.instance.state.meta.isTouched||s.instance.setMeta((e=>({...e,isTouched:!0})))}))})),(await Promise.all(t)).flat()},this.validateArrayFieldsStartingFrom=async(e,t,s)=>{const a=this.getFieldValue(e),i=Array.isArray(a)?Math.max(a.length-1,0):null,r=[`${e}[${t}]`];for(let s=t+1;s<=(i??0);s++)r.push(`${e}[${s}]`);const n=Object.keys(this.fieldInfo).filter((e=>r.some((t=>e.startsWith(t))))),l=[];return V((()=>{n.forEach((e=>{l.push(Promise.resolve().then((()=>this.validateField(e,s))))}))})),(await Promise.all(l)).flat()},this.validateField=(e,t)=>{var s;const a=null==(s=this.fieldInfo[e])?void 0:s.instance;return a?(a.state.meta.isTouched||a.setMeta((e=>({...e,isTouched:!0}))),a.validate(t)):[]},this.validateSync=e=>{const t=w(e,this.options);let s=!1;const a={};V((()=>{for(const e of t){if(!e.validate)continue;const t=this.runValidator({validate:e.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:i,fieldErrors:r}=L(t),n=K(e.cause);if(r)for(const[e,t]of Object.entries(r)){const s={...a[e]||{},[n]:t};a[e]=s;const i=this.getFieldMeta(e);i&&i.errorMap[n]!==t&&this.setFieldMeta(e,(e=>({...e,errorMap:{...e.errorMap,[n]:t}})))}this.state.errorMap[n]!==i&&this.baseStore.setState((e=>({...e,errorMap:{...e.errorMap,[n]:i}}))),(i||r)&&(s=!0)}}));const i=K("submit");return this.state.errorMap[i]&&"submit"!==e&&!s&&this.baseStore.setState((e=>({...e,errorMap:{...e.errorMap,[i]:void 0}}))),{hasErrored:s,fieldsErrorMap:a}},this.validateAsync=async e=>{const t=S(e,this.options);this.state.isFormValidating||this.baseStore.setState((e=>({...e,isFormValidating:!0})));const s=[];let a;for(const e of t){if(!e.validate)continue;const t=K(e.cause),i=this.state.validationMetaMap[t];null==i||i.lastAbortController.abort();const r=new AbortController;this.state.validationMetaMap[t]={lastAbortController:r},s.push(new Promise((async t=>{let s;try{s=await new Promise(((t,s)=>{setTimeout((async()=>{if(r.signal.aborted)return t(void 0);try{t(await this.runValidator({validate:e.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:r.signal},type:"validateAsync"}))}catch(e){s(e)}}),e.debounceMs)}))}catch(e){s=e}const{formError:i,fieldErrors:n}=L(s);n&&(a=a?{...a,...n}:n);const l=K(e.cause);if(a)for(const[e,t]of Object.entries(a)){const s=this.getFieldMeta(e);s&&s.errorMap[l]!==t&&this.setFieldMeta(e,(e=>({...e,errorMap:{...e.errorMap,[l]:t}})))}this.baseStore.setState((e=>({...e,errorMap:{...e.errorMap,[l]:i}}))),t(a?{fieldErrors:a,errorMapKey:l}:void 0)})))}let i=[];const r={};if(s.length){i=await Promise.all(s);for(const e of i)if(null==e?void 0:e.fieldErrors){const{errorMapKey:t}=e;for(const[s,a]of Object.entries(e.fieldErrors)){const e={...r[s]||{},[t]:a};r[s]=e}}}return this.baseStore.setState((e=>({...e,isFormValidating:!1}))),r},this.validate=e=>{const{hasErrored:t,fieldsErrorMap:s}=this.validateSync(e);return t&&!this.options.asyncAlways?s:this.validateAsync(e)},this.handleSubmit=async()=>{var e,t,s,a;if(this.baseStore.setState((e=>({...e,isSubmitted:!1,submissionAttempts:e.submissionAttempts+1}))),!this.state.canSubmit)return;this.baseStore.setState((e=>({...e,isSubmitting:!0})));const i=()=>{this.baseStore.setState((e=>({...e,isSubmitting:!1})))};if(await this.validateAllFields("submit"),!this.state.isValid)return i(),void(null==(t=(e=this.options).onSubmitInvalid)||t.call(e,{value:this.state.values,formApi:this}));V((()=>{Object.values(this.fieldInfo).forEach((e=>{var t,s,a;null==(a=null==(s=null==(t=e.instance)?void 0:t.options.listeners)?void 0:s.onSubmit)||a.call(s,{value:e.instance.state.value,fieldApi:e.instance})}))}));try{await(null==(a=(s=this.options).onSubmit)?void 0:a.call(s,{value:this.state.values,formApi:this})),V((()=>{this.baseStore.setState((e=>({...e,isSubmitted:!0}))),i()}))}catch(e){throw i(),e}},this.getFieldValue=e=>c(this.state.values,e),this.getFieldMeta=e=>this.state.fieldMeta[e],this.getFieldInfo=e=>{var t;return(t=this.fieldInfo)[e]||(t[e]={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}})},this.setFieldMeta=(e,t)=>{this.baseStore.setState((s=>({...s,fieldMetaBase:{...s.fieldMetaBase,[e]:u(t,s.fieldMetaBase[e])}})))},this.resetFieldMeta=e=>Object.keys(e).reduce(((e,t)=>(e[t]={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{}},e)),{}),this.setFieldValue=(e,t,s)=>{const a=(null==s?void 0:s.dontUpdateMeta)??!1;V((()=>{a||this.setFieldMeta(e,(e=>({...e,isTouched:!0,isDirty:!0,errorMap:{...null==e?void 0:e.errorMap,onMount:void 0}}))),this.baseStore.setState((s=>({...s,values:h(s.values,e,t)})))}))},this.deleteField=e=>{this.baseStore.setState((t=>{const s={...t};return s.values=function(e,t){const s=g(t);return function e(t){if(!t)return;if(1===s.length){const e=s[0];if(Array.isArray(t)&&"number"==typeof e)return t.filter(((t,s)=>s!==e));const{[e]:a,...i}=t;return i}const a=s.shift();if("string"==typeof a&&"object"==typeof t)return{...t,[a]:e(t[a])};if("number"==typeof a&&Array.isArray(t)){if(a>=t.length)return t;const s=t.slice(0,a);return[...s.length?s:new Array(a),e(t[a]),...t.slice(a+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}(e)}(s.values,e),delete s.fieldMetaBase[e],s})),delete this.fieldInfo[e]},this.pushFieldValue=(e,t,s)=>{this.setFieldValue(e,(e=>[...Array.isArray(e)?e:[],t]),s),this.validateField(e,"change")},this.insertFieldValue=async(e,t,s,a)=>{this.setFieldValue(e,(e=>[...e.slice(0,t),s,...e.slice(t)]),a),await this.validateField(e,"change")},this.replaceFieldValue=async(e,t,s,a)=>{this.setFieldValue(e,(e=>e.map(((e,a)=>a===t?s:e))),a),await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,t,"change")},this.removeFieldValue=async(e,t,s)=>{const a=this.getFieldValue(e),i=Array.isArray(a)?Math.max(a.length-1,0):null;if(this.setFieldValue(e,(e=>e.filter(((e,s)=>s!==t))),s),null!==i){const t=`${e}[${i}]`;Object.keys(this.fieldInfo).filter((e=>e.startsWith(t))).forEach((e=>this.deleteField(e)))}await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,t,"change")},this.swapFieldValues=(e,t,s,a)=>{this.setFieldValue(e,(e=>{const a=e[t],i=e[s];return h(h(e,`${t}`,i),`${s}`,a)}),a),this.validateField(e,"change"),this.validateField(`${e}[${t}]`,"change"),this.validateField(`${e}[${s}]`,"change")},this.moveFieldValues=(e,t,s,a)=>{this.setFieldValue(e,(e=>(e.splice(s,0,e.splice(t,1)[0]),e)),a),this.validateField(e,"change"),this.validateField(`${e}[${t}]`,"change"),this.validateField(`${e}[${s}]`,"change")},this.baseStore=new M(j({...null==e?void 0:e.defaultState,values:(null==e?void 0:e.defaultValues)??(null==(t=null==e?void 0:e.defaultState)?void 0:t.values),isFormValid:!0})),this.fieldMetaDerived=new R({deps:[this.baseStore],fn:({prevDepVals:e,currDepVals:t,prevVal:s})=>{const a=s,i=null==e?void 0:e[0],r=t[0],n={};for(const e of Object.keys(r.fieldMetaBase)){const t=r.fieldMetaBase[e],s=null==i?void 0:i.fieldMetaBase[e],l=null==a?void 0:a[e];let o=null==l?void 0:l.errors;s&&t.errorMap===s.errorMap||(o=Object.values(t.errorMap??{}).filter((e=>void 0!==e)));const u=!t.isDirty;l&&l.isPristine===u&&l.errors===o&&t===s?n[e]=l:n[e]={...t,errors:o,isPristine:u}}return n}}),this.store=new R({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:e,currDepVals:t,prevVal:s})=>{var a,i,r,n;const l=s,o=null==e?void 0:e[0],u=t[0],c=Object.values(u.fieldMetaBase),h=c.some((e=>null==e?void 0:e.isValidating)),d=!c.some((e=>{return(null==e?void 0:e.errorMap)&&(t=Object.values(e.errorMap).filter(Boolean),!(Array.isArray(t)&&0===t.length));var t})),f=c.some((e=>null==e?void 0:e.isTouched)),p=c.some((e=>null==e?void 0:e.isBlurred)),v=f&&(null==(a=null==u?void 0:u.errorMap)?void 0:a.onMount),m=c.some((e=>null==e?void 0:e.isDirty)),y=!m,b=Boolean((null==(i=u.errorMap)?void 0:i.onMount)||c.some((e=>{var t;return null==(t=null==e?void 0:e.errorMap)?void 0:t.onMount}))),g=!!h;let S=(null==l?void 0:l.errors)??[];o&&u.errorMap===o.errorMap||(S=Object.values(u.errorMap).reduce(((e,t)=>void 0===t?e:"string"==typeof t?(e.push(t),e):t&&"object"==typeof t?(e.push(t.form),e):e),[]));const w=0===S.length,M=d&&w,R=0===u.submissionAttempts&&!f&&!b||!g&&!u.isSubmitting&&M;let O=u.errorMap;v&&(S=S.filter((e=>e!==u.errorMap.onMount)),O=Object.assign(O,{onMount:void 0}));let C={...u,errorMap:O,fieldMeta:this.fieldMetaDerived.state,errors:S,isFieldsValidating:h,isFieldsValid:d,isFormValid:w,isValid:M,canSubmit:R,isTouched:f,isBlurred:p,isPristine:y,isDirty:m};const E=(null==(r=this.options.transform)?void 0:r.deps)??[];if(E.length!==this.prevTransformArray.length||E.some(((e,t)=>e!==this.prevTransformArray[t]))){const e=Object.assign({},this,{state:C});null==(n=this.options.transform)||n.fn(e),C=e.state,this.prevTransformArray=E}return C}}),this.update(e||{})}get state(){return this.store.state}runValidator(e){const t=this.options.validatorAdapter;return t&&("function"!=typeof e.validate||"~standard"in e.validate)?t()[e.type](e.value,e.validate):Q(e.validate)?q()()[e.type](e.value,e.validate):e.validate(e.value)}setErrorMap(e){this.baseStore.setState((t=>({...t,errorMap:{...t.errorMap,...e}})))}}function L(e){return e?"object"==typeof e?{formError:L(e.form).formError,fieldErrors:e.fields}:"string"!=typeof e?{formError:"Invalid Form Values"}:{formError:e}:{formError:void 0}}function K(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";default:return"onChange"}}var U=s(242);function G(e,t=e=>e){return(0,U.useSyncExternalStoreWithSelector)(e.subscribe,(()=>e.state),(()=>e.state),t,N)}function N(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,a]of e)if(!t.has(s)||!Object.is(a,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!1;for(let a=0;a<s.length;a++)if(!Object.prototype.hasOwnProperty.call(t,s[a])||!Object.is(e[s[a]],t[s[a]]))return!1;return!0}class H{constructor(e){this.options={},this.mount=()=>{var e,t;const s=this.store.mount();this.getInfo().instance=this,this.update(this.options);const{onMount:a}=this.options.validators||{};if(a){const e=this.runValidator({validate:a,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});e&&this.setMeta((t=>({...t,errorMap:{...null==t?void 0:t.errorMap,onMount:e}})))}return null==(t=null==(e=this.options.listeners)?void 0:e.onMount)||t.call(e,{value:this.state.value,fieldApi:this}),s},this.update=e=>{if(void 0===this.state.value){const t=c(e.form.options.defaultValues,e.name);void 0!==e.defaultValue?this.setValue(e.defaultValue,{dontUpdateMeta:!0}):void 0!==t&&this.setValue(t,{dontUpdateMeta:!0})}void 0===this.form.getFieldMeta(this.name)&&this.setMeta(this.state.meta),this.options=e,this.name=e.name},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(e,t)=>{var s,a;this.form.setFieldValue(this.name,e,t),null==(a=null==(s=this.options.listeners)?void 0:s.onChange)||a.call(s,{value:this.state.value,fieldApi:this}),this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=e=>this.form.setFieldMeta(this.name,e),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(e,t)=>this.form.pushFieldValue(this.name,e,t),this.insertValue=(e,t,s)=>this.form.insertFieldValue(this.name,e,t,s),this.replaceValue=(e,t,s)=>this.form.replaceFieldValue(this.name,e,t,s),this.removeValue=(e,t)=>this.form.removeFieldValue(this.name,e,t),this.swapValues=(e,t,s)=>this.form.swapFieldValues(this.name,e,t,s),this.moveValue=(e,t,s)=>this.form.moveFieldValues(this.name,e,t,s),this.getLinkedFields=e=>{const t=Object.values(this.form.fieldInfo),s=[];for(const a of t){if(!a.instance)continue;const{onChangeListenTo:t,onBlurListenTo:i}=a.instance.options.validators||{};"change"===e&&(null==t?void 0:t.includes(this.name))&&s.push(a.instance),"blur"===e&&(null==i?void 0:i.includes(this.name))&&s.push(a.instance)}return s},this.validateSync=(e,t)=>{const s=w(e,this.options),a=this.getLinkedFields(e).reduce(((t,s)=>{const a=w(e,s.options);return a.forEach((e=>{e.field=s})),t.concat(a)}),[]);let i=!1;V((()=>{const e=(e,s)=>{const a=z(s.cause),r=s.validate?$(e.runValidator({validate:s.validate,value:{value:e.store.state.value,validationSource:"field",fieldApi:e},type:"validate"})):t[a];e.state.meta.errorMap[a]!==r&&e.setMeta((e=>({...e,errorMap:{...e.errorMap,[z(s.cause)]:r||t[a]}}))),(r||t[a])&&(i=!0)};for(const t of s)e(this,t);for(const t of a)t.validate&&e(t.field,t)}));const r=z("submit");return this.state.meta.errorMap[r]&&"submit"!==e&&!i&&this.setMeta((e=>({...e,errorMap:{...e.errorMap,[r]:void 0}}))),{hasErrored:i}},this.validateAsync=async(e,t)=>{const s=S(e,this.options),a=await t,i=this.getLinkedFields(e),r=i.reduce(((t,s)=>{const a=S(e,s.options);return a.forEach((e=>{e.field=s})),t.concat(a)}),[]);this.state.meta.isValidating||this.setMeta((e=>({...e,isValidating:!0})));for(const e of i)e.setMeta((e=>({...e,isValidating:!0})));const n=[],l=[],o=(e,t,s)=>{const i=z(t.cause),r=e.getInfo().validationMetaMap[i];null==r||r.lastAbortController.abort();const n=new AbortController;this.getInfo().validationMetaMap[i]={lastAbortController:n},s.push(new Promise((async s=>{var r;let l;try{l=await new Promise(((s,a)=>{this.timeoutIds[t.cause]&&clearTimeout(this.timeoutIds[t.cause]),this.timeoutIds[t.cause]=setTimeout((async()=>{if(n.signal.aborted)return s(void 0);try{s(await this.runValidator({validate:t.validate,value:{value:e.store.state.value,fieldApi:e,signal:n.signal,validationSource:"field"},type:"validateAsync"}))}catch(e){a(e)}}),t.debounceMs)}))}catch(e){l=e}if(n.signal.aborted)return s(void 0);const o=$(l),u=null==(r=a[this.name])?void 0:r[i],c=o||u;e.setMeta((e=>({...e,errorMap:{...null==e?void 0:e.errorMap,[i]:c}}))),s(c)})))};for(const e of s)e.validate&&o(this,e,n);for(const e of r)e.validate&&o(e.field,e,l);let u=[];(n.length||l.length)&&(u=await Promise.all(n),await Promise.all(l)),this.setMeta((e=>({...e,isValidating:!1})));for(const e of i)e.setMeta((e=>({...e,isValidating:!1})));return u.filter(Boolean)},this.validate=e=>{var t;if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:s}=this.form.validateSync(e),{hasErrored:a}=this.validateSync(e,s[this.name]??{});if(a&&!this.options.asyncAlways)return null==(t=this.getInfo().validationMetaMap[z(e)])||t.lastAbortController.abort(),this.state.meta.errors;const i=this.form.validateAsync(e);return this.validateAsync(e,i)},this.handleChange=e=>{this.setValue(e)},this.handleBlur=()=>{var e,t;this.state.meta.isTouched||(this.setMeta((e=>({...e,isTouched:!0}))),this.validate("change")),this.state.meta.isBlurred||this.setMeta((e=>({...e,isBlurred:!0}))),this.validate("blur"),null==(t=null==(e=this.options.listeners)?void 0:e.onBlur)||t.call(e,{value:this.state.value,fieldApi:this})},this.form=e.form,this.name=e.name,this.timeoutIds={},void 0!==e.defaultValue&&this.form.setFieldValue(this.name,e.defaultValue,{dontUpdateMeta:!0}),this.store=new R({deps:[this.form.store],fn:()=>({value:this.form.getFieldValue(this.name),meta:this.form.getFieldMeta(this.name)??{isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{},...e.defaultMeta}})}),this.options=e}get state(){return this.store.state}runValidator(e){const t=[this.form.options.validatorAdapter,this.options.validatorAdapter];for(const s of t)if(s&&("function"!=typeof e.validate||"~standard"in e.validate))return s()[e.type](e.value,e.validate);return Q(e.validate)?q()()[e.type](e.value,e.validate):e.validate(e.value)}setErrorMap(e){this.setMeta((t=>({...t,errorMap:{...t.errorMap,...e}})))}}function $(e){if(e)return"string"!=typeof e?"Invalid Form Values":e}function z(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";default:return"onChange"}}const W="undefined"!=typeof window?a.useLayoutEffect:a.useEffect,J=({children:e,...t})=>{const s=function(e){const[t]=(0,a.useState)((()=>{const t=new H({...e,form:e.form,name:e.name});return t.Field=J,t}));return W(t.mount,[t]),W((()=>{t.update(e)})),G(t.store,"array"===e.mode?e=>[e.meta,Object.keys(e.value??[]).length]:void 0),t}(t),i=(0,a.useMemo)((()=>u(e,s)),[e,s,s.state.value,s.state.meta]);return(0,o.jsx)(o.Fragment,{children:i})};function Y({form:e,selector:t,children:s}){return u(s,G(e.store,t))}var X=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Z="undefined"==typeof window||"Deno"in globalThis;function ee(){}function te(e){return"number"==typeof e&&e>=0&&e!==1/0}function se(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ae(e,t){return"function"==typeof e?e(t):e}function ie(e,t){return"function"==typeof e?e(t):e}function re(e,t){const{type:s="all",exact:a,fetchStatus:i,predicate:r,queryKey:n,stale:l}=e;if(n)if(a){if(t.queryHash!==le(n,t.options))return!1}else if(!ue(t.queryKey,n))return!1;if("all"!==s){const e=t.isActive();if("active"===s&&!e)return!1;if("inactive"===s&&e)return!1}return!("boolean"==typeof l&&t.isStale()!==l||i&&i!==t.state.fetchStatus||r&&!r(t))}function ne(e,t){const{exact:s,status:a,predicate:i,mutationKey:r}=e;if(r){if(!t.options.mutationKey)return!1;if(s){if(oe(t.options.mutationKey)!==oe(r))return!1}else if(!ue(t.options.mutationKey,r))return!1}return!(a&&t.state.status!==a||i&&!i(t))}function le(e,t){return(t?.queryKeyHashFn||oe)(e)}function oe(e){return JSON.stringify(e,((e,t)=>fe(t)?Object.keys(t).sort().reduce(((e,s)=>(e[s]=t[s],e)),{}):t))}function ue(e,t){return e===t||typeof e==typeof t&&!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&!Object.keys(t).some((s=>!ue(e[s],t[s])))}function ce(e,t){if(e===t)return e;const s=de(e)&&de(t);if(s||fe(e)&&fe(t)){const a=s?e:Object.keys(e),i=a.length,r=s?t:Object.keys(t),n=r.length,l=s?[]:{};let o=0;for(let i=0;i<n;i++){const n=s?i:r[i];(!s&&a.includes(n)||s)&&void 0===e[n]&&void 0===t[n]?(l[n]=void 0,o++):(l[n]=ce(e[n],t[n]),l[n]===e[n]&&void 0!==e[n]&&o++)}return i===n&&o===i?e:l}return t}function he(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function de(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function fe(e){if(!pe(e))return!1;const t=e.constructor;if(void 0===t)return!0;const s=t.prototype;return!!pe(s)&&!!s.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype}function pe(e){return"[object Object]"===Object.prototype.toString.call(e)}function ve(e,t,s){return"function"==typeof s.structuralSharing?s.structuralSharing(e,t):!1!==s.structuralSharing?ce(e,t):t}function me(e,t,s=0){const a=[...e,t];return s&&a.length>s?a.slice(1):a}function ye(e,t,s=0){const a=[t,...e];return s&&a.length>s?a.slice(0,-1):a}var be=Symbol();function ge(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==be?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}var Se=new class extends X{#e;#t;#s;constructor(){super(),this.#s=e=>{if(!Z&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e((e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach((t=>{t(e)}))}isFocused(){return"boolean"==typeof this.#e?this.#e:"hidden"!==globalThis.document?.visibilityState}},we=function(){let e=[],t=0,s=e=>{e()},a=e=>{e()},i=e=>setTimeout(e,0);const r=a=>{t?e.push(a):i((()=>{s(a)}))};return{batch:r=>{let n;t++;try{n=r()}finally{t--,t||(()=>{const t=e;e=[],t.length&&i((()=>{a((()=>{t.forEach((e=>{s(e)}))}))}))})()}return n},batchCalls:e=>(...t)=>{r((()=>{e(...t)}))},schedule:r,setNotifyFunction:e=>{s=e},setBatchNotifyFunction:e=>{a=e},setScheduler:e=>{i=e}}}(),Me=new class extends X{#a=!0;#t;#s;constructor(){super(),this.#s=e=>{if(!Z&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#a!==e&&(this.#a=e,this.listeners.forEach((t=>{t(e)})))}isOnline(){return this.#a}};function Re(){let e,t;const s=new Promise(((s,a)=>{e=s,t=a}));function a(e){Object.assign(s,e),delete s.resolve,delete s.reject}return s.status="pending",s.catch((()=>{})),s.resolve=t=>{a({status:"fulfilled",value:t}),e(t)},s.reject=e=>{a({status:"rejected",reason:e}),t(e)},s}function Oe(e){return Math.min(1e3*2**e,3e4)}function Ce(e){return"online"!==(e??"online")||Me.isOnline()}var Ee=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Fe(e){return e instanceof Ee}function Ae(e){let t,s=!1,a=0,i=!1;const r=Re(),n=()=>Se.isFocused()&&("always"===e.networkMode||Me.isOnline())&&e.canRun(),l=()=>Ce(e.networkMode)&&e.canRun(),o=s=>{i||(i=!0,e.onSuccess?.(s),t?.(),r.resolve(s))},u=s=>{i||(i=!0,e.onError?.(s),t?.(),r.reject(s))},c=()=>new Promise((s=>{t=e=>{(i||n())&&s(e)},e.onPause?.()})).then((()=>{t=void 0,i||e.onContinue?.()})),h=()=>{if(i)return;let t;const r=0===a?e.initialPromise:void 0;try{t=r??e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(o).catch((t=>{if(i)return;const r=e.retry??(Z?0:3),l=e.retryDelay??Oe,o="function"==typeof l?l(a,t):l,d=!0===r||"number"==typeof r&&a<r||"function"==typeof r&&r(a,t);var f;!s&&d?(a++,e.onFail?.(a,t),(f=o,new Promise((e=>{setTimeout(e,f)}))).then((()=>n()?void 0:c())).then((()=>{s?u(t):h()}))):u(t)}))};return{promise:r,cancel:t=>{i||(u(new Ee(t)),e.abort?.())},continue:()=>(t?.(),r),cancelRetry:()=>{s=!0},continueRetry:()=>{s=!1},canStart:l,start:()=>(l()?h():c().then(h),r)}}var Pe=class{#i;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),te(this.gcTime)&&(this.#i=setTimeout((()=>{this.optionalRemove()}),this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Z?1/0:3e5))}clearGcTimeout(){this.#i&&(clearTimeout(this.#i),this.#i=void 0)}},De=class extends Pe{#r;#n;#l;#o;#u;#c;constructor(e){super(),this.#c=!1,this.#u=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#l=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#r=function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,s=void 0!==t,a=s?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}(this.options),this.state=e.state??this.#r,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#o?.promise}setOptions(e){this.options={...this.#u,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#l.remove(this)}setData(e,t){const s=ve(this.state.data,e,this.options);return this.#h({data:s,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),s}setState(e,t){this.#h({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#o?.promise;return this.#o?.cancel(e),t?t.then(ee).catch(ee):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#r)}isActive(){return this.observers.some((e=>!1!==ie(e.options.enabled,this)))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===be||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some((e=>e.getCurrentResult().isStale)):void 0===this.state.data)}isStaleByTime(e=0){return this.state.isInvalidated||void 0===this.state.data||!se(this.state.dataUpdatedAt,e)}onFocus(){const e=this.observers.find((e=>e.shouldFetchOnWindowFocus()));e?.refetch({cancelRefetch:!1}),this.#o?.continue()}onOnline(){const e=this.observers.find((e=>e.shouldFetchOnReconnect()));e?.refetch({cancelRefetch:!1}),this.#o?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#l.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter((t=>t!==e)),this.observers.length||(this.#o&&(this.#c?this.#o.cancel({revert:!0}):this.#o.cancelRetry()),this.scheduleGc()),this.#l.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#h({type:"invalidate"})}fetch(e,t){if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#o)return this.#o.continueRetry(),this.#o.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find((e=>e.options.queryFn));e&&this.setOptions(e.options)}const s=new AbortController,a=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#c=!0,s.signal)})},i={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>{const e=ge(this.options,t),s={queryKey:this.queryKey,meta:this.meta};return a(s),this.#c=!1,this.options.persister?this.options.persister(e,s,this):e(s)}};a(i),this.options.behavior?.onFetch(i,this),this.#n=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===i.fetchOptions?.meta||this.#h({type:"fetch",meta:i.fetchOptions?.meta});const r=e=>{Fe(e)&&e.silent||this.#h({type:"error",error:e}),Fe(e)||(this.#l.config.onError?.(e,this),this.#l.config.onSettled?.(this.state.data,e,this)),this.scheduleGc()};return this.#o=Ae({initialPromise:t?.initialPromise,fn:i.fetchFn,abort:s.abort.bind(s),onSuccess:e=>{if(void 0!==e){try{this.setData(e)}catch(e){return void r(e)}this.#l.config.onSuccess?.(e,this),this.#l.config.onSettled?.(e,this.state.error,this),this.scheduleGc()}else r(new Error(`${this.queryHash} data is undefined`))},onError:r,onFail:(e,t)=>{this.#h({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#h({type:"pause"})},onContinue:()=>{this.#h({type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0}),this.#o.start()}#h(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...xe(t.data,this.options),fetchMeta:e.meta??null};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Fe(s)&&s.revert&&this.#n?{...this.#n,fetchStatus:"idle"}:{...t,error:s,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),we.batch((()=>{this.observers.forEach((e=>{e.onQueryUpdate()})),this.#l.notify({query:this,type:"updated",action:e})}))}};function xe(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ce(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var Te=class extends X{constructor(e,t){super(),this.options=t,this.#d=e,this.#f=null,this.#p=Re(),this.options.experimental_prefetchInRender||this.#p.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#d;#v=void 0;#m=void 0;#y=void 0;#b;#g;#p;#f;#S;#w;#M;#R;#O;#C;#E=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#v.addObserver(this),_e(this.#v,this.options)?this.#F():this.updateResult(),this.#A())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ie(this.#v,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ie(this.#v,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#P(),this.#D(),this.#v.removeObserver(this)}setOptions(e,t){const s=this.options,a=this.#v;if(this.options=this.#d.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof ie(this.options.enabled,this.#v))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#v.setOptions(this.options),s._defaulted&&!he(this.options,s)&&this.#d.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#v,observer:this});const i=this.hasListeners();i&&Ve(this.#v,a,this.options,s)&&this.#F(),this.updateResult(t),!i||this.#v===a&&ie(this.options.enabled,this.#v)===ie(s.enabled,this.#v)&&ae(this.options.staleTime,this.#v)===ae(s.staleTime,this.#v)||this.#T();const r=this.#_();!i||this.#v===a&&ie(this.options.enabled,this.#v)===ie(s.enabled,this.#v)&&r===this.#C||this.#I(r)}getOptimisticResult(e){const t=this.#d.getQueryCache().build(this.#d,e),s=this.createResult(t,e);return a=s,!he(this.getCurrentResult(),a)&&(this.#y=s,this.#g=this.options,this.#b=this.#v.state),s;var a}getCurrentResult(){return this.#y}trackResult(e,t){const s={};return Object.keys(e).forEach((a=>{Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),t?.(a),e[a])})})),s}trackProp(e){this.#E.add(e)}getCurrentQuery(){return this.#v}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#d.defaultQueryOptions(e),s=this.#d.getQueryCache().build(this.#d,t);return s.fetch().then((()=>this.createResult(s,t)))}fetch(e){return this.#F({...e,cancelRefetch:e.cancelRefetch??!0}).then((()=>(this.updateResult(),this.#y)))}#F(e){this.#x();let t=this.#v.fetch(this.options,e);return e?.throwOnError||(t=t.catch(ee)),t}#T(){this.#P();const e=ae(this.options.staleTime,this.#v);if(Z||this.#y.isStale||!te(e))return;const t=se(this.#y.dataUpdatedAt,e)+1;this.#R=setTimeout((()=>{this.#y.isStale||this.updateResult()}),t)}#_(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#v):this.options.refetchInterval)??!1}#I(e){this.#D(),this.#C=e,!Z&&!1!==ie(this.options.enabled,this.#v)&&te(this.#C)&&0!==this.#C&&(this.#O=setInterval((()=>{(this.options.refetchIntervalInBackground||Se.isFocused())&&this.#F()}),this.#C))}#A(){this.#T(),this.#I(this.#_())}#P(){this.#R&&(clearTimeout(this.#R),this.#R=void 0)}#D(){this.#O&&(clearInterval(this.#O),this.#O=void 0)}createResult(e,t){const s=this.#v,a=this.options,i=this.#y,r=this.#b,n=this.#g,l=e!==s?e.state:this.#m,{state:o}=e;let u,c={...o},h=!1;if(t._optimisticResults){const i=this.hasListeners(),r=!i&&_e(e,t),n=i&&Ve(e,s,t,a);(r||n)&&(c={...c,...xe(o.data,e.options)}),"isRestoring"===t._optimisticResults&&(c.fetchStatus="idle")}let{error:d,errorUpdatedAt:f,status:p}=c;if(t.select&&void 0!==c.data)if(i&&c.data===r?.data&&t.select===this.#S)u=this.#w;else try{this.#S=t.select,u=t.select(c.data),u=ve(i?.data,u,t),this.#w=u,this.#f=null}catch(e){this.#f=e}else u=c.data;if(void 0!==t.placeholderData&&void 0===u&&"pending"===p){let e;if(i?.isPlaceholderData&&t.placeholderData===n?.placeholderData)e=i.data;else if(e="function"==typeof t.placeholderData?t.placeholderData(this.#M?.state.data,this.#M):t.placeholderData,t.select&&void 0!==e)try{e=t.select(e),this.#f=null}catch(e){this.#f=e}void 0!==e&&(p="success",u=ve(i?.data,e,t),h=!0)}this.#f&&(d=this.#f,u=this.#w,f=Date.now(),p="error");const v="fetching"===c.fetchStatus,m="pending"===p,y="error"===p,b=m&&v,g=void 0!==u,S={status:p,fetchStatus:c.fetchStatus,isPending:m,isSuccess:"success"===p,isError:y,isInitialLoading:b,isLoading:b,data:u,dataUpdatedAt:c.dataUpdatedAt,error:d,errorUpdatedAt:f,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>l.dataUpdateCount||c.errorUpdateCount>l.errorUpdateCount,isFetching:v,isRefetching:v&&!m,isLoadingError:y&&!g,isPaused:"paused"===c.fetchStatus,isPlaceholderData:h,isRefetchError:y&&g,isStale:ke(e,t),refetch:this.refetch,promise:this.#p};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===S.status?e.reject(S.error):void 0!==S.data&&e.resolve(S.data)},a=()=>{const e=this.#p=S.promise=Re();t(e)},i=this.#p;switch(i.status){case"pending":e.queryHash===s.queryHash&&t(i);break;case"fulfilled":"error"!==S.status&&S.data===i.value||a();break;case"rejected":"error"===S.status&&S.error===i.reason||a()}}return S}updateResult(e){const t=this.#y,s=this.createResult(this.#v,this.options);if(this.#b=this.#v.state,this.#g=this.options,void 0!==this.#b.data&&(this.#M=this.#v),he(s,t))return;this.#y=s;const a={};!1!==e?.listeners&&(()=>{if(!t)return!0;const{notifyOnChangeProps:e}=this.options,s="function"==typeof e?e():e;if("all"===s||!s&&!this.#E.size)return!0;const a=new Set(s??this.#E);return this.options.throwOnError&&a.add("error"),Object.keys(this.#y).some((e=>{const s=e;return this.#y[s]!==t[s]&&a.has(s)}))})()&&(a.listeners=!0),this.#V({...a,...e})}#x(){const e=this.#d.getQueryCache().build(this.#d,this.options);if(e===this.#v)return;const t=this.#v;this.#v=e,this.#m=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#A()}#V(e){we.batch((()=>{e.listeners&&this.listeners.forEach((e=>{e(this.#y)})),this.#d.getQueryCache().notify({query:this.#v,type:"observerResultsUpdated"})}))}};function _e(e,t){return function(e,t){return!1!==ie(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&Ie(e,t,t.refetchOnMount)}function Ie(e,t,s){if(!1!==ie(t.enabled,e)){const a="function"==typeof s?s(e):s;return"always"===a||!1!==a&&ke(e,t)}return!1}function Ve(e,t,s,a){return(e!==t||!1===ie(a.enabled,e))&&(!s.suspense||"error"!==e.state.status)&&ke(e,s)}function ke(e,t){return!1!==ie(t.enabled,e)&&e.isStaleByTime(ae(t.staleTime,e))}var qe=a.createContext(void 0),Qe=e=>{const t=a.useContext(qe);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},je=({client:e,children:t})=>(a.useEffect((()=>(e.mount(),()=>{e.unmount()})),[e]),(0,o.jsx)(qe.Provider,{value:e,children:t}));var Be=a.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}());function Le(e,t){return"function"==typeof e?e(...t):!!e}function Ke(){}var Ue=a.createContext(!1),Ge=(Ue.Provider,(e,t,s)=>t.fetchOptimistic(e).catch((()=>{s.clearReset()})));const Ne=window.wp.apiFetch;var He=s.n(Ne);const $e=()=>{const e=function(e,t,s){const i=Qe(s),r=a.useContext(Ue),n=a.useContext(Be),l=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=r?"isRestoring":"optimistic",(e=>{const t=e.staleTime;e.suspense&&(e.staleTime="function"==typeof t?(...e)=>Math.max(t(...e),1e3):Math.max(t??1e3,1e3),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3)))})(l),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(l,n),(e=>{a.useEffect((()=>{e.clearReset()}),[e])})(n);const o=!i.getQueryCache().get(l.queryHash),[u]=a.useState((()=>new t(i,l))),c=u.getOptimisticResult(l),h=!r&&!1!==e.subscribed;if(a.useSyncExternalStore(a.useCallback((e=>{const t=h?u.subscribe(we.batchCalls(e)):Ke;return u.updateResult(),t}),[u,h]),(()=>u.getCurrentResult()),(()=>u.getCurrentResult())),a.useEffect((()=>{u.setOptions(l,{listeners:!1})}),[l,u]),((e,t)=>e?.suspense&&t.isPending)(l,c))throw Ge(l,u,n);if((({result:e,errorResetBoundary:t,throwOnError:s,query:a})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&Le(s,[e.error,a]))({result:c,errorResetBoundary:n,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash)}))throw c.error;if(i.getDefaultOptions().queries?._experimental_afterQuery?.(l,c),l.experimental_prefetchInRender&&!Z&&((e,t)=>e.isLoading&&e.isFetching&&!t)(c,r)){const e=o?Ge(l,u,n):i.getQueryCache().get(l.queryHash)?.promise;e?.catch(Ke).finally((()=>{u.updateResult()}))}return l.notifyOnChangeProps?c:u.trackResult(c)}({queryKey:["settings-query"],retry:1,queryFn:async()=>await He()({path:"/modula-ai-image-descriptor/v1/ai-settings",method:"GET"})},Te,void 0);return e},ze=window.wp.primitives,We=(0,o.jsx)(ze.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,o.jsx)(ze.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})}),Je=(0,o.jsx)(ze.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,o.jsx)(ze.Path,{d:"m13.06 12 6.47-6.47-1.06-1.06L12 10.94 5.53 4.47 4.47 5.53 10.94 12l-6.47 6.47 1.06 1.06L12 13.06l6.47 6.47 1.06-1.06L13.06 12Z"})});var Ye=class extends Pe{#k;#q;#o;constructor(e){super(),this.mutationId=e.mutationId,this.#q=e.mutationCache,this.#k=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#k.includes(e)||(this.#k.push(e),this.clearGcTimeout(),this.#q.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#k=this.#k.filter((t=>t!==e)),this.scheduleGc(),this.#q.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#k.length||("pending"===this.state.status?this.scheduleGc():this.#q.remove(this))}continue(){return this.#o?.continue()??this.execute(this.state.variables)}async execute(e){this.#o=Ae({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#h({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#h({type:"pause"})},onContinue:()=>{this.#h({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#q.canRun(this)});const t="pending"===this.state.status,s=!this.#o.canStart();try{if(!t){this.#h({type:"pending",variables:e,isPaused:s}),await(this.#q.config.onMutate?.(e,this));const t=await(this.options.onMutate?.(e));t!==this.state.context&&this.#h({type:"pending",context:t,variables:e,isPaused:s})}const a=await this.#o.start();return await(this.#q.config.onSuccess?.(a,e,this.state.context,this)),await(this.options.onSuccess?.(a,e,this.state.context)),await(this.#q.config.onSettled?.(a,null,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(a,null,e,this.state.context)),this.#h({type:"success",data:a}),a}catch(t){try{throw await(this.#q.config.onError?.(t,e,this.state.context,this)),await(this.options.onError?.(t,e,this.state.context)),await(this.#q.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(void 0,t,e,this.state.context)),t}finally{this.#h({type:"error",error:t})}}finally{this.#q.runNext(this)}}#h(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),we.batch((()=>{this.#k.forEach((t=>{t.onMutationUpdate(e)})),this.#q.notify({mutation:this,type:"updated",action:e})}))}},Xe=class extends X{#d;#y=void 0;#Q;#j;constructor(e,t){super(),this.#d=e,this.setOptions(t),this.bindMethods(),this.#B()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#d.defaultMutationOptions(e),he(this.options,t)||this.#d.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#Q,observer:this}),t?.mutationKey&&this.options.mutationKey&&oe(t.mutationKey)!==oe(this.options.mutationKey)?this.reset():"pending"===this.#Q?.state.status&&this.#Q.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#Q?.removeObserver(this)}onMutationUpdate(e){this.#B(),this.#V(e)}getCurrentResult(){return this.#y}reset(){this.#Q?.removeObserver(this),this.#Q=void 0,this.#B(),this.#V()}mutate(e,t){return this.#j=t,this.#Q?.removeObserver(this),this.#Q=this.#d.getMutationCache().build(this.#d,this.options),this.#Q.addObserver(this),this.#Q.execute(e)}#B(){const e=this.#Q?.state??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};this.#y={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#V(e){we.batch((()=>{if(this.#j&&this.hasListeners()){const t=this.#y.variables,s=this.#y.context;"success"===e?.type?(this.#j.onSuccess?.(e.data,t,s),this.#j.onSettled?.(e.data,null,t,s)):"error"===e?.type&&(this.#j.onError?.(e.error,t,s),this.#j.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach((e=>{e(this.#y)}))}))}};const Ze=[{value:"ab",label:"Abkhaz"},{value:"ace",label:"Acehnese"},{value:"ach",label:"Acholi"},{value:"af",label:"Afrikaans"},{value:"sq",label:"Albanian"},{value:"alz",label:"Alur"},{value:"am",label:"Amharic"},{value:"ar",label:"Arabic"},{value:"hy",label:"Armenian"},{value:"as",label:"Assamese"},{value:"awa",label:"Awadhi"},{value:"ay",label:"Aymara"},{value:"az",label:"Azerbaijani"},{value:"ban",label:"Balinese"},{value:"bm",label:"Bambara"},{value:"ba",label:"Bashkir"},{value:"eu",label:"Basque"},{value:"btx",label:"Batak Karo"},{value:"bts",label:"Batak Simalungun"},{value:"bbc",label:"Batak Toba"},{value:"be",label:"Belarusian"},{value:"bem",label:"Bemba"},{value:"bn",label:"Bengali"},{value:"bew",label:"Betawi"},{value:"bho",label:"Bhojpuri"},{value:"bik",label:"Bikol"},{value:"bs",label:"Bosnian"},{value:"br",label:"Breton"},{value:"bg",label:"Bulgarian"},{value:"bua",label:"Buryat"},{value:"yue",label:"Cantonese"},{value:"ca",label:"Catalan"},{value:"ceb",label:"Cebuano"},{value:"ny",label:"Chichewa"},{value:"zh",label:"Chinese (Simplified)"},{value:"zh-TW",label:"Chinese (Traditional)"},{value:"cv",label:"Chuvash"},{value:"co",label:"Corsican"},{value:"crh",label:"Crimean Tatar"},{value:"hr",label:"Croatian"},{value:"cs",label:"Czech"},{value:"da",label:"Danish"},{value:"dv",label:"Dhivehi"},{value:"din",label:"Dinka"},{value:"doi",label:"Dogri"},{value:"dov",label:"Dombe"},{value:"nl",label:"Dutch"},{value:"dz",label:"Dzongkha"},{value:"en",label:"English"},{value:"eo",label:"Esperanto"},{value:"et",label:"Estonian"},{value:"ee",label:"Ewe"},{value:"fj",label:"Fijian"},{value:"tl",label:"Filipino"},{value:"fi",label:"Finnish"},{value:"fr",label:"French"},{value:"fy",label:"Frisian"},{value:"ff",label:"Fulani"},{value:"gaa",label:"Ga"},{value:"gl",label:"Galician"},{value:"ka",label:"Georgian"},{value:"de",label:"German"},{value:"el",label:"Greek"},{value:"gn",label:"Guarani"},{value:"gu",label:"Gujarati"},{value:"ht",label:"Haitian Creole"},{value:"cnh",label:"Hakha Chin"},{value:"ha",label:"Hausa"},{value:"haw",label:"Hawaiian"},{value:"iw",label:"Hebrew"},{value:"hil",label:"Hiligaynon"},{value:"hi",label:"Hindi"},{value:"hmn",label:"Hmong"},{value:"hu",label:"Hungarian"},{value:"hrx",label:"Hunsrik"},{value:"is",label:"Icelandic"},{value:"ig",label:"Igbo"},{value:"ilo",label:"Ilocano"},{value:"id",label:"Indonesian"},{value:"ga",label:"Irish"},{value:"it",label:"Italian"},{value:"ja",label:"Japanese"},{value:"jw",label:"Javanese"},{value:"kn",label:"Kannada"},{value:"pam",label:"Kapampangan"},{value:"kk",label:"Kazakh"},{value:"km",label:"Khmer"},{value:"cgg",label:"Kiga"},{value:"rw",label:"Kinyarwanda"},{value:"ktu",label:"Kituba"},{value:"gom",label:"Konkani"},{value:"ko",label:"Korean"},{value:"kri",label:"Krio"},{value:"ku",label:"Kurdish (Kurmanji)"},{value:"ckb",label:"Kurdish (Sorani)"},{value:"ky",label:"Kyrgyz"},{value:"lo",label:"Lao"},{value:"ltg",label:"Latgalian"},{value:"la",label:"Latin"},{value:"lv",label:"Latvian"},{value:"lij",label:"Ligurian"},{value:"li",label:"Limburgish"},{value:"ln",label:"Lingala"},{value:"lt",label:"Lithuanian"},{value:"lmo",label:"Lombard"},{value:"lg",label:"Luganda"},{value:"luo",label:"Luo"},{value:"lb",label:"Luxembourgish"},{value:"mk",label:"Macedonian"},{value:"mai",label:"Maithili"},{value:"mak",label:"Makassar"},{value:"mg",label:"Malagasy"},{value:"ms",label:"Malay"},{value:"ms-Arab",label:"Malay (Jawi)"},{value:"ml",label:"Malayalam"},{value:"mt",label:"Maltese"},{value:"mi",label:"Maori"},{value:"mr",label:"Marathi"},{value:"chm",label:"Meadow Mari"},{value:"mni-Mtei",label:"Meiteilon (Manipuri)"},{value:"min",label:"Minang"},{value:"lus",label:"Mizo"},{value:"mn",label:"Mongolian"},{value:"my",label:"Myanmar (Burmese)"},{value:"nr",label:"Ndebele (South)"},{value:"new",label:"Nepalbhasa (Newari)"},{value:"ne",label:"Nepali"},{value:"no",label:"Norwegian"},{value:"nus",label:"Nuer"},{value:"oc",label:"Occitan"},{value:"or",label:"Odia (Oriya)"},{value:"om",label:"Oromo"},{value:"pag",label:"Pangasinan"},{value:"pap",label:"Papiamento"},{value:"ps",label:"Pashto"},{value:"fa",label:"Persian"},{value:"pl",label:"Polish"},{value:"pt",label:"Portuguese (Brazil)"},{value:"pa",label:"Punjabi (Gurmukhi)"},{value:"pa-Arab",label:"Punjabi (Shahmukhi)"},{value:"qu",label:"Quechua"},{value:"rom",label:"Romani"},{value:"ro",label:"Romanian"},{value:"rn",label:"Rundi"},{value:"ru",label:"Russian"},{value:"sm",label:"Samoan"},{value:"sg",label:"Sango"},{value:"sa",label:"Sanskrit"},{value:"gd",label:"Scots Gaelic"},{value:"nso",label:"Sepedi"},{value:"sr",label:"Serbian"},{value:"st",label:"Sesotho"},{value:"crs",label:"Seychellois Creole"},{value:"shn",label:"Shan"},{value:"sn",label:"Shona"},{value:"scn",label:"Sicilian"},{value:"szl",label:"Silesian"},{value:"sd",label:"Sindhi"},{value:"si",label:"Sinhala"},{value:"sk",label:"Slovak"},{value:"sl",label:"Slovenian"},{value:"so",label:"Somali"},{value:"es",label:"Spanish"},{value:"su",label:"Sundanese"},{value:"sw",label:"Swahili"},{value:"ss",label:"Swati"},{value:"sv",label:"Swedish"},{value:"tg",label:"Tajik"},{value:"ta",label:"Tamil"},{value:"tt",label:"Tatar"},{value:"te",label:"Telugu"},{value:"tet",label:"Tetum"},{value:"th",label:"Thai"},{value:"ti",label:"Tigrinya"},{value:"ts",label:"Tsonga"},{value:"tn",label:"Tswana"},{value:"tr",label:"Turkish"},{value:"tk",label:"Turkmen"},{value:"ak",label:"Twi"},{value:"uk",label:"Ukrainian"},{value:"ur",label:"Urdu"},{value:"ug",label:"Uyghur"},{value:"uz",label:"Uzbek"},{value:"vi",label:"Vietnamese"},{value:"cy",label:"Welsh"},{value:"xh",label:"Xhosa"},{value:"yi",label:"Yiddish"},{value:"yo",label:"Yoruba"},{value:"yua",label:"Yucatec Maya"},{value:"zu",label:"Zulu"},{value:"he",label:"Hebrew"},{value:"jv",label:"Javanese"},{value:"zh-CN",label:"Chinese (Simplified)"}];function et(){const[e,t]=(0,i.useState)(!1),[s,u]=(0,i.useState)(!1),{mutate:c}=(({onSuccess:e}={})=>{const t=Qe();return function(e){const t=Qe(void 0),[s]=a.useState((()=>new Xe(t,e)));a.useEffect((()=>{s.setOptions(e)}),[s,e]);const i=a.useSyncExternalStore(a.useCallback((e=>s.subscribe(we.batchCalls(e))),[s]),(()=>s.getCurrentResult()),(()=>s.getCurrentResult())),r=a.useCallback(((e,t)=>{s.mutate(e,t).catch(Ke)}),[s]);if(i.error&&Le(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:r,mutateAsync:i.mutate}}({mutationFn:(0,i.useCallback)((e=>He()({path:"/modula-ai-image-descriptor/v1/ai-settings",method:"POST",data:{api_key:e.api_key,language:e.language}})),[]),onSuccess:(s,a,i)=>{t.invalidateQueries({refetchType:"all",queryKey:["settings-query"]}),e&&e(s,a,i)}})})(),{data:h}=$e(),d=function(e){const[t]=(0,a.useState)((()=>{const t=new B(e),s=t;return s.Field=function(e){return(0,o.jsx)(J,{...e,form:t})},s.Subscribe=e=>(0,o.jsx)(Y,{form:t,selector:e.selector,children:e.children}),s}));return W(t.mount,[]),G(t.store,(e=>e.isSubmitting)),W((()=>{t.update(e)})),t}({defaultValues:{apiKey:h?.api_key||"",language:h?.language||"en",email:h?.readonly?.email,first_name:h?.readonly?.first_name,last_name:h?.readonly?.last_name,valid_key:h?.readonly?.valid_key},onSubmit:async({value:e})=>{t(!0),c({api_key:e.apiKey,language:e.language}),t(!1),u(!0)}}),f=h?.readonly?.valid_key;return React.createElement("div",{className:"ZrVV_oVUUXei2_m9bGmy"},!f&&React.createElement(React.Fragment,null,React.createElement("p",{className:l},(0,n.__)("In order to use this powerful functionality you will first need to claim your credits.","modula-best-grid-gallery")),React.createElement("p",{className:l},(0,n.__)('If you already have the api key, use it in the field below or click "Claim Credits" to get a new one.',"modula-best-grid-gallery"))),React.createElement("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),d.handleSubmit()}},React.createElement(r.Flex,{gap:4,align:"flex-start"},React.createElement(r.FlexItem,{style:{flex:2}},React.createElement(d.Field,{name:"apiKey",children:e=>React.createElement(r.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:React.createElement(r.Flex,{justify:"space-between"},React.createElement(r.FlexItem,null,React.createElement(r.Flex,{justify:"flex-start",gap:2},React.createElement(r.FlexItem,null,(0,n.__)("API Key","modula-best-grid-gallery")),React.createElement(r.FlexItem,null,React.createElement(r.Icon,{style:{fill:f?"green":"red"},size:f?18:14,icon:f?We:Je,className:"modula-settings-form-valid-key"})))),React.createElement(r.FlexItem,null,f&&React.createElement(React.Fragment,null,h?.readonly?.credits," ",(0,n.__)("Credits remaining","modula-best-grid-gallery")),!f&&React.createElement(React.Fragment,null,(0,n.__)("Invalid API Key","modula-best-grid-gallery")))),value:e.state.value,onChange:t=>{e.handleChange(t)}})})),React.createElement(r.FlexItem,{style:{flex:1}},React.createElement(d.Field,{name:"language",children:e=>React.createElement(r.SelectControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,n.__)("Language used to generate reports","modula-best-grid-gallery"),value:e.state.value,options:Ze,onChange:t=>{e.handleChange(t)}})}))),React.createElement(r.__experimentalSpacer,{marginTop:4,marginBottom:4}),React.createElement(r.Flex,{justify:"flex-start",gap:4,className:"tcyly_pF221L4i3gxM3j"},React.createElement(d.Subscribe,{selector:e=>[e.canSubmit],children:([t])=>React.createElement(r.Button,{variant:"primary",type:"submit",iconPosition:"right",icon:e?React.createElement(r.Spinner,null):s?We:null,isDisabled:!t},e?(0,n.__)("… saving","modula-best-grid-gallery"):s?(0,n.__)("Saved","modula-best-grid-gallery"):(0,n.__)("Save Settings","modula-best-grid-gallery"))}),!f&&React.createElement(r.Button,{variant:"link",onClick:()=>{window.open("https://wp-modula.com/my-account","_blank")}},(0,n.__)("Claim Credits","modula-best-grid-gallery")))))}function tt(){const[e,t]=(0,i.useState)(!1),[s,a]=(0,i.useState)(!1),[l,o]=(0,i.useState)(null);return React.createElement("div",{className:"modula-button-action"},l&&React.createElement(r.Notice,{status:l.status,isDismissible:!1,className:"modula-notice"},l.message,l.details&&React.createElement("span",{className:"modula-notice-details"}," ",l.details)),React.createElement("p",{className:"modula-description"},(0,n.__)("With the latest update, we have changed the way the image information is handled, now the information is retrieved from the Media Library. If you wish to set your previous details for the gallery images, please click the below button.","modula-best-grid-gallery")),React.createElement(r.Button,{variant:"primary",isBusy:e,disabled:e,onClick:async()=>{t(!0),o(null);try{const e=await He()({path:"/modula-ai-image-descriptor/v1/update-alts-from-image-array",method:"POST"});e.success?o({status:"success",message:e.message,details:e.data?`(${e.data.updated_images} images from ${e.data.total_galleries} galleries)`:""}):o({status:"error",message:e.message||(0,n.__)("Failed to update gallery images.","modula-best-grid-gallery")})}catch(e){o({status:"error",message:e.message||(0,n.__)("An error occurred while updating gallery images.","modula-best-grid-gallery")})}finally{t(!1)}}},e?(0,n.__)("Processing…","modula-best-grid-gallery"):(0,n.__)("Update Gallery Images","modula-best-grid-gallery")),React.createElement("div",{className:"modula-cleanup-section"},React.createElement("p",{className:"modula-description"},(0,n.__)("Clean up your database by removing all wrongfully created galleries.","modula-best-grid-gallery")),React.createElement(r.Button,{isDestructive:!0,isBusy:s,disabled:s,onClick:async()=>{if(window.confirm((0,n.__)("Are you sure you want to delete all trash and draft galleries? This action cannot be undone.","modula-best-grid-gallery"))){a(!0),o(null);try{const e=await He()({path:"/modula-ai-image-descriptor/v1/cleanup-galleries",method:"POST"});e.success?o({status:"success",message:e.message,details:e.data?`(${e.data.deleted_posts} galleries and ${e.data.deleted_meta} meta entries)`:""}):o({status:"error",message:e.message||(0,n.__)("Failed to cleanup galleries.","modula-best-grid-gallery")})}catch(e){o({status:"error",message:e.message||(0,n.__)("An error occurred while cleaning up galleries.","modula-best-grid-gallery")})}finally{a(!1)}}}},s?(0,n.__)("Cleaning up…","modula-best-grid-gallery"):(0,n.__)("Cleanup database","modula-best-grid-gallery"))))}function st(){return React.createElement(React.Fragment,null,React.createElement(et,null),React.createElement(r.__experimentalDivider,{margin:8}),React.createElement(tt,null))}function at(){return React.createElement(React.Fragment,null,React.createElement(r.__experimentalSpacer,{marginTop:4,marginBottom:4}),React.createElement(r.Card,null,React.createElement(r.CardHeader,null,React.createElement("h2",null,(0,n.__)("Modula AI","modula-best-grid-gallery"))),React.createElement(r.CardBody,null,React.createElement(st,null))))}var it=class extends X{constructor(e={}){super(),this.config=e,this.#L=new Map}#L;build(e,t,s){const a=t.queryKey,i=t.queryHash??le(a,t);let r=this.get(i);return r||(r=new De({cache:this,queryKey:a,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(a)}),this.add(r)),r}add(e){this.#L.has(e.queryHash)||(this.#L.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#L.get(e.queryHash);t&&(e.destroy(),t===e&&this.#L.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){we.batch((()=>{this.getAll().forEach((e=>{this.remove(e)}))}))}get(e){return this.#L.get(e)}getAll(){return[...this.#L.values()]}find(e){const t={exact:!0,...e};return this.getAll().find((e=>re(t,e)))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter((t=>re(e,t))):t}notify(e){we.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){we.batch((()=>{this.getAll().forEach((e=>{e.onFocus()}))}))}onOnline(){we.batch((()=>{this.getAll().forEach((e=>{e.onOnline()}))}))}},rt=class extends X{constructor(e={}){super(),this.config=e,this.#K=new Set,this.#U=new Map,this.#G=0}#K;#U;#G;build(e,t,s){const a=new Ye({mutationCache:this,mutationId:++this.#G,options:e.defaultMutationOptions(t),state:s});return this.add(a),a}add(e){this.#K.add(e);const t=nt(e);if("string"==typeof t){const s=this.#U.get(t);s?s.push(e):this.#U.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#K.delete(e)){const t=nt(e);if("string"==typeof t){const s=this.#U.get(t);if(s)if(s.length>1){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}else s[0]===e&&this.#U.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=nt(e);if("string"==typeof t){const s=this.#U.get(t),a=s?.find((e=>"pending"===e.state.status));return!a||a===e}return!0}runNext(e){const t=nt(e);if("string"==typeof t){const s=this.#U.get(t)?.find((t=>t!==e&&t.state.isPaused));return s?.continue()??Promise.resolve()}return Promise.resolve()}clear(){we.batch((()=>{this.#K.forEach((e=>{this.notify({type:"removed",mutation:e})})),this.#K.clear(),this.#U.clear()}))}getAll(){return Array.from(this.#K)}find(e){const t={exact:!0,...e};return this.getAll().find((e=>ne(t,e)))}findAll(e={}){return this.getAll().filter((t=>ne(e,t)))}notify(e){we.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.getAll().filter((e=>e.state.isPaused));return we.batch((()=>Promise.all(e.map((e=>e.continue().catch(ee))))))}};function nt(e){return e.options.scope?.id}function lt(e){return{onFetch:(t,s)=>{const a=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,r=t.state.data?.pages||[],n=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},o=0;const u=async()=>{let s=!1;const u=ge(t.options,t.fetchOptions),c=async(e,a,i)=>{if(s)return Promise.reject();if(null==a&&e.pages.length)return Promise.resolve(e);const r={queryKey:t.queryKey,pageParam:a,direction:i?"backward":"forward",meta:t.options.meta};var n;n=r,Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(t.signal.aborted?s=!0:t.signal.addEventListener("abort",(()=>{s=!0})),t.signal)});const l=await u(r),{maxPages:o}=t.options,c=i?ye:me;return{pages:c(e.pages,l,o),pageParams:c(e.pageParams,a,o)}};if(i&&r.length){const e="backward"===i,t={pages:r,pageParams:n},s=(e?ut:ot)(a,t);l=await c(t,s,e)}else{const t=e??r.length;do{const e=0===o?n[0]??a.initialPageParam:ot(a,l);if(o>0&&null==e)break;l=await c(l,e),o++}while(o<t)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s):t.fetchFn=u}}}function ot(e,{pages:t,pageParams:s}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,s[a],s):void 0}function ut(e,{pages:t,pageParams:s}){return t.length>0?e.getPreviousPageParam?.(t[0],t,s[0],s):void 0}const ct=new class{#N;#q;#u;#H;#$;#z;#W;#J;constructor(e={}){this.#N=e.queryCache||new it,this.#q=e.mutationCache||new rt,this.#u=e.defaultOptions||{},this.#H=new Map,this.#$=new Map,this.#z=0}mount(){this.#z++,1===this.#z&&(this.#W=Se.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#N.onFocus())})),this.#J=Me.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#N.onOnline())})))}unmount(){this.#z--,0===this.#z&&(this.#W?.(),this.#W=void 0,this.#J?.(),this.#J=void 0)}isFetching(e){return this.#N.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#q.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#N.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=this.#N.build(this,t),a=s.state.data;return void 0===a?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(ae(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return this.#N.findAll(e).map((({queryKey:e,state:t})=>[e,t.data]))}setQueryData(e,t,s){const a=this.defaultQueryOptions({queryKey:e}),i=this.#N.get(a.queryHash),r=i?.state.data,n=function(e,t){return"function"==typeof e?e(t):e}(t,r);if(void 0!==n)return this.#N.build(this,a).setData(n,{...s,manual:!0})}setQueriesData(e,t,s){return we.batch((()=>this.#N.findAll(e).map((({queryKey:e})=>[e,this.setQueryData(e,t,s)]))))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#N.get(t.queryHash)?.state}removeQueries(e){const t=this.#N;we.batch((()=>{t.findAll(e).forEach((e=>{t.remove(e)}))}))}resetQueries(e,t){const s=this.#N,a={type:"active",...e};return we.batch((()=>(s.findAll(e).forEach((e=>{e.reset()})),this.refetchQueries(a,t))))}cancelQueries(e,t={}){const s={revert:!0,...t},a=we.batch((()=>this.#N.findAll(e).map((e=>e.cancel(s)))));return Promise.all(a).then(ee).catch(ee)}invalidateQueries(e,t={}){return we.batch((()=>{if(this.#N.findAll(e).forEach((e=>{e.invalidate()})),"none"===e?.refetchType)return Promise.resolve();const s={...e,type:e?.refetchType??e?.type??"active"};return this.refetchQueries(s,t)}))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},a=we.batch((()=>this.#N.findAll(e).filter((e=>!e.isDisabled())).map((e=>{let t=e.fetch(void 0,s);return s.throwOnError||(t=t.catch(ee)),"paused"===e.state.fetchStatus?Promise.resolve():t}))));return Promise.all(a).then(ee)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const s=this.#N.build(this,t);return s.isStaleByTime(ae(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ee).catch(ee)}fetchInfiniteQuery(e){return e.behavior=lt(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ee).catch(ee)}ensureInfiniteQueryData(e){return e.behavior=lt(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Me.isOnline()?this.#q.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#N}getMutationCache(){return this.#q}getDefaultOptions(){return this.#u}setDefaultOptions(e){this.#u=e}setQueryDefaults(e,t){this.#H.set(oe(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#H.values()],s={};return t.forEach((t=>{ue(e,t.queryKey)&&Object.assign(s,t.defaultOptions)})),s}setMutationDefaults(e,t){this.#$.set(oe(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#$.values()];let s={};return t.forEach((t=>{ue(e,t.mutationKey)&&(s={...s,...t.defaultOptions})})),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#u.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=le(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===be&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#u.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#N.clear(),this.#q.clear()}},ht=(e,t)=>{switch(t.type){case"UPDATE_SETTINGS":return{...e,settings:t.payload};case"TOGGLE_ADVANCED_REGISTRATION":return{...e,isAdvancedRegistration:t.payload};case"SET_LOGGED_IN":return{...e,isLoggedIn:t.payload};default:return e}},dt={api_key:"",isAdvancedRegistration:!1,isLoggedIn:!1},ft=(0,i.createContext)(dt),pt=({children:e})=>{const[t,s]=(0,i.useReducer)(ht,dt),a={state:t,dispatch:s};return React.createElement(ft.Provider,{value:a},e)};document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("modula-ai-settings");e&&(0,i.createRoot)(e).render(React.createElement(je,{client:ct},React.createElement(pt,null,React.createElement(at,null))))}))})();